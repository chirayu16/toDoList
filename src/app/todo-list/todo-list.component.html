<div class="container">
  <!-- Incomplete Tasks -->
  <div class="todo-list todo-incomplete">
    <h2>To-Do Tasks</h2>
    <ul>
      <div *ngIf="incompleteTodos.length === 0" class="no-tasks">
        No active tasks present <br />
        <a href="#" (click)="handleFocusAddTask()">Click here to add a new task</a>
      </div>
      <li *ngFor="let todo of incompleteTodos" class="task-item">
        <div class="task-header">
          <input type="checkbox" [checked]="todo.completed" (change)="toggleTask(todo)" />
          <span>{{ todo.name }}</span>
          <button (click)="deleteTask(todo)">&#10006;</button>
        </div>
        <!-- Add Subtask -->
        <div class="subtask-form">
          <!-- Change: Use todo.newSubtaskName for each task's input -->
          <input type="text" [(ngModel)]="todo.newSubtaskName" placeholder="New subtask" />
          <button (click)="addSubtask(todo)">Add Subtask</button>
        </div>
        <!-- Subtasks -->
        <ul class="subtask-list">
          <li *ngFor="let subtask of todo.subtasks" class="subtask-item">
            <input type="checkbox" [checked]="subtask.completed" (change)="toggleSubtask(todo, subtask)" />
            <span>{{ subtask.name }}</span>
            <button (click)="deleteSubtask(todo, subtask.name)">&#10006;</button>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Completed Tasks -->
  <div class="todo-list todo-completed">
    <h2>Completed Tasks</h2>
    <ul>
      <div *ngIf="completedTodos.length === 0" class="no-tasks">
        No completed tasks present
      </div>
      <li *ngFor="let todo of completedTodos" class="task-item">
        <div class="task-header">
          <input type="checkbox" [checked]="todo.completed" (change)="toggleTask(todo)" />
          <span>{{ todo.name }}</span>
          <button (click)="deleteTask(todo)">&#10006;</button>
        </div>
        <!-- Add Subtask -->
        <div class="subtask-form">
          <!-- Change: Use todo.newSubtaskName for each task's input -->
          <input type="text" [(ngModel)]="todo.newSubtaskName" placeholder="New subtask" />
          <button (click)="addSubtask(todo)">Add Subtask</button>
        </div>
        <!-- Subtasks -->
        <ul class="subtask-list">
          <li *ngFor="let subtask of todo.subtasks" class="subtask-item">
            <input type="checkbox" [checked]="subtask.completed" (change)="toggleSubtask(todo, subtask)" />
            <span>{{ subtask.name }}</span>
            <button (click)="deleteSubtask(todo, subtask.name)">&#10006;</button>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</div>
